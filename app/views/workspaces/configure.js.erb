(function () {

  var virtual_machine = $("#virtual_machine").val();

  $.ajax({
    url: '<%= start_workspace_path(@workspace) %>',
    type: 'post',
    dataType: 'json',
    data: {
      '_method': 'put',
      'authenticity_token': '<%= form_authenticity_token %>',
      'virtual_machines': [ virtual_machine ]
    },
    success: function(json) {
      if (!json[virtual_machine])
        return;

      if (json[virtual_machine]["status"] == "error") {
        alert("Error: " + json[virtual_machine]["cause"]);
        return;
      }

      ConsoleControler.manageConsole({
        name: virtual_machine,
        port: json[virtual_machine]["port"]
      });
    },
    error: function(msg) {
      alert("Something was wrong");
    }
  });

}());
