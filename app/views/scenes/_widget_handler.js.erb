<%= javascript_tag do %>

  function initStage() {
    var json = $("#scene_definition").val();

    if (!json)
      return;

    var widget = <%= @widget %>.getEditor();
    Netlab.loadJSON(widget, json);
  };

  function clearScene() {
    var widget = <%= @widget %>.getEditor();
    var nodes = widget.getNodes();

    for(var i = 0; i < nodes.length; i++)
      widget.removeNode(nodes[i].name);
  };

  function fillForm() {
    var name = $("#scene_name").val();
    name = prompt('Scene name:', name);

    if (name == null)
      return false;

    $("#scene_name").val(name);

    var widget = <%= @widget %>.getEditor();

    $("#scene_definition").val(Netlab.saveJSON(widget));

    return true;
  };

<% end %>
