<%= javascript_tag do %>

  function initStage() {
    var json =
      <% if @scene.definition %>
        "<%=j @scene.definition.html_safe %>";
      <% else %>
        "";
      <% end %>

    if (!json)
      return;

    var widget = <%= @module %>.getWidget();
    Netlab.loadJSON(widget, json);
  };

  $(window).load( function() {
    <%= @module %>.initWidget({
      container: "container",
      width: 700,
      height: 600,
      mode: "<%= @mode %>",
      callback: initStage
    });
  });

<% end %>
