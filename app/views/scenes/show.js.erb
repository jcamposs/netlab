if (!($('#container').length > 0))
  $('#dialog').html("<%=j render 'netwidget' %>")

$('#dialog')
  .dialog({
    autoOpen: false,
    width: <%= @width %> + 30,
    height: <%= @height %> + 60,
    title: '<%= @scene.name %>',
    modal: true,
    open: function(event, ui) {
      try {
        <%= @module %>.getWidget();
      } catch(err) {
        initWidget();
      }

      var json =
      <% if @scene.definition %>
        "<%=j @scene.definition.html_safe %>";
      <% else %>
        "";
      <% end %>

      loadStage(json);
    },
    close: function(event, ui) {
      clearScene();
    }
  });

$('#dialog').dialog('open');
