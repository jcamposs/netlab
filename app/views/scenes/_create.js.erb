<%= javascript_tag do %>

  function initStage() {
    var json = $("#scene_definition").val();

    if (!json)
      return;

    var editor = <%= @widget %>.getEditor();
    Netlab.loadJSON(editor, json);
  };

  function clearScene() {
    var editor = <%= @widget %>.getEditor();
    var nodes = editor.getNodes();

    for(var i = 0; i < nodes.length; i++)
      editor.removeNode(nodes[i].name);
  };

  function fillForm() {
    var name = prompt('Scene name', '');

    if (name == null)
      return false;

    $("#scene_name").val(name);

    var editor = <%= @widget %>.getEditor();

    $("#scene_definition").val(Netlab.saveJSON(editor));

    return true;
  };

<% end %>
